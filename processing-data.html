<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>6 Processing data | QGIS for Transport Research: an introduction</title>
  <meta name="description" content="A book on using open source Geographic Information System for transport planning.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="6 Processing data | QGIS for Transport Research: an introduction" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book on using open source Geographic Information System for transport planning." />
  <meta name="github-repo" content="ITSLeeds/QGIS-intro" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Processing data | QGIS for Transport Research: an introduction" />
  
  <meta name="twitter:description" content="A book on using open source Geographic Information System for transport planning." />
  

<meta name="author" content="Robin Lovelace and Malcolm Morgan">


<meta name="date" content="2019-03-04">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="style-and-select-features.html">
<link rel="next" href="making-maps.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">QGIS for Transport</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#what-is-gis"><i class="fa fa-check"></i><b>2.1</b> What is GIS?</a></li>
<li class="chapter" data-level="2.2" data-path="introduction.html"><a href="introduction.html#why-use-gis-for-transport-research"><i class="fa fa-check"></i><b>2.2</b> Why use GIS for transport research?</a></li>
<li class="chapter" data-level="2.3" data-path="introduction.html"><a href="introduction.html#what-is-qgis"><i class="fa fa-check"></i><b>2.3</b> What is QGIS?</a></li>
<li class="chapter" data-level="2.4" data-path="introduction.html"><a href="introduction.html#alternatives-to-qgis"><i class="fa fa-check"></i><b>2.4</b> Alternatives to QGIS</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-qgis.html"><a href="working-with-qgis.html"><i class="fa fa-check"></i><b>3</b> Working with QGIS</a><ul>
<li class="chapter" data-level="3.1" data-path="working-with-qgis.html"><a href="working-with-qgis.html#opening-qgis"><i class="fa fa-check"></i><b>3.1</b> Opening QGIS</a></li>
<li class="chapter" data-level="3.2" data-path="working-with-qgis.html"><a href="working-with-qgis.html#key-qgis-components"><i class="fa fa-check"></i><b>3.2</b> Key QGIS components</a></li>
<li class="chapter" data-level="3.3" data-path="working-with-qgis.html"><a href="working-with-qgis.html#plugins"><i class="fa fa-check"></i><b>3.3</b> Plugins</a></li>
<li class="chapter" data-level="3.4" data-path="working-with-qgis.html"><a href="working-with-qgis.html#loading-a-basemap"><i class="fa fa-check"></i><b>3.4</b> Loading a basemap</a></li>
<li class="chapter" data-level="3.5" data-path="working-with-qgis.html"><a href="working-with-qgis.html#projects-and-files"><i class="fa fa-check"></i><b>3.5</b> Projects and Files</a></li>
<li class="chapter" data-level="3.6" data-path="working-with-qgis.html"><a href="working-with-qgis.html#projections-and-coordinate-reference-systems"><i class="fa fa-check"></i><b>3.6</b> Projections and Coordinate Reference Systems</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>4</b> Downloading and loading data</a><ul>
<li class="chapter" data-level="4.1" data-path="data.html"><a href="data.html#importing-spatial-data"><i class="fa fa-check"></i><b>4.1</b> Importing spatial data</a></li>
<li class="chapter" data-level="4.2" data-path="data.html"><a href="data.html#importing-a-csv-or-text-file"><i class="fa fa-check"></i><b>4.2</b> Importing a CSV or text file</a><ul>
<li class="chapter" data-level="4.2.1" data-path="data.html"><a href="data.html#csv-with-spatial-data"><i class="fa fa-check"></i><b>4.2.1</b> CSV with spatial data</a></li>
<li class="chapter" data-level="4.2.2" data-path="data.html"><a href="data.html#csv-without-spatial-data"><i class="fa fa-check"></i><b>4.2.2</b> CSV without spatial data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="style-and-select-features.html"><a href="style-and-select-features.html"><i class="fa fa-check"></i><b>5</b> Style and select features</a><ul>
<li class="chapter" data-level="5.1" data-path="style-and-select-features.html"><a href="style-and-select-features.html#identify-features"><i class="fa fa-check"></i><b>5.1</b> Identify Features</a></li>
<li class="chapter" data-level="5.2" data-path="style-and-select-features.html"><a href="style-and-select-features.html#symbology"><i class="fa fa-check"></i><b>5.2</b> Symbology</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="processing-data.html"><a href="processing-data.html"><i class="fa fa-check"></i><b>6</b> Processing data</a><ul>
<li class="chapter" data-level="6.1" data-path="processing-data.html"><a href="processing-data.html#reprojecting-data"><i class="fa fa-check"></i><b>6.1</b> Reprojecting Data</a></li>
<li class="chapter" data-level="6.2" data-path="processing-data.html"><a href="processing-data.html#joining-data"><i class="fa fa-check"></i><b>6.2</b> Joining Data</a><ul>
<li class="chapter" data-level="6.2.1" data-path="processing-data.html"><a href="processing-data.html#attribute-joins"><i class="fa fa-check"></i><b>6.2.1</b> Attribute Joins</a></li>
<li class="chapter" data-level="6.2.2" data-path="processing-data.html"><a href="processing-data.html#spatial-joins"><i class="fa fa-check"></i><b>6.2.2</b> Spatial Joins</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="processing-data.html"><a href="processing-data.html#attribute-calculations"><i class="fa fa-check"></i><b>6.3</b> Attribute calculations</a></li>
<li class="chapter" data-level="6.4" data-path="processing-data.html"><a href="processing-data.html#buffers"><i class="fa fa-check"></i><b>6.4</b> Buffers</a></li>
<li class="chapter" data-level="6.5" data-path="processing-data.html"><a href="processing-data.html#spatial-subsetting"><i class="fa fa-check"></i><b>6.5</b> Spatial subsetting</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="making-maps.html"><a href="making-maps.html"><i class="fa fa-check"></i><b>7</b> Making maps</a></li>
<li class="chapter" data-level="8" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>8</b> Next steps</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">QGIS for Transport Research: an introduction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="processing-data" class="section level1">
<h1><span class="header-section-number">6</span> Processing data</h1>
<p>We saw in Chapter … how to style and select features of interest from layers loaded into QGIS. In this section, we will learn how to process data. That means creating new data from existing data.</p>
<div id="reprojecting-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Reprojecting Data</h2>
<p>Our two spatial datasets have different coordinate systems. This can make it difficult to make connections between the datasets. So we will reproject the stats19 data to the British National Grid.</p>
<p>In the vector, menu select Data management Tools, Reproject Layer</p>
<div class="figure">
<img src="figures/reproject.png" alt="Reproject Menu" width="100%" />
<p class="caption">
(#fig:reproject_menu)Reproject Menu
</p>
</div>
<div class="figure">
<img src="figures/crs.png" alt="Reproject MenuCordiante Reference System" width="100%" />
<p class="caption">
(#fig:crs_menu)Reproject MenuCordiante Reference System
</p>
</div>
</div>
<div id="joining-data" class="section level2">
<h2><span class="header-section-number">6.2</span> Joining Data</h2>
<p>Joining data allows you to link two separate datasets together by something they have in common. There are two types of join. Attribute joins (often just called joins) link two datasets by a common attribute such as an ID number. Spatial joins link dataset by a shared location.</p>
<p>In this next section, we will use a series of joins to find the area of Leeds with the highest rate of road collisions.</p>
<div id="attribute-joins" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Attribute Joins</h3>
<p>We will join the population data onto the LSOA boundaries.</p>
<p>Find “leeds_lsoa” in the Layers panel and right-click to bring up the context menu</p>
<p>Click on Properties</p>
<p>Select Joins from the options on the left</p>
<p>Click the green + button to open the Add Vector Join window</p>
<p>Select the following options:</p>
<pre><code>Join layer: population

Join field: area

Target field: lsoa11cd</code></pre>
<p>Click OK,</p>
<p>Click OK again</p>
<div class="figure"><span id="fig:joins"></span>
<img src="figures/joins.jpg" alt="The Add Vector Join window" width="100%" />
<p class="caption">
Figure 6.1: The Add Vector Join window
</p>
</div>
<p>Use the “Identify features” tool to see that each LSOA now has a population value.</p>
</div>
<div id="spatial-joins" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Spatial Joins</h3>
<p>We will assign an LSOA ID number to each road collision by doing a spatial join.<br />
In the “Vector” menu, select “Data Management Tools”, then “Join Attributes by Location”.</p>
<div class="figure">
<img src="figures/spatial_joins.jpg" alt="Join Attributes by Location" width="100%" />
<p class="caption">
(#fig:joins_menu)Join Attributes by Location
</p>
</div>
<p>In the Vector Menu, select Data Management Tools, Select Attributes by location.</p>
<div class="figure">
<img src="figures/spatial_joins_window.jpg" alt="Join Attributes by Location Window" width="100%" />
<p class="caption">
(#fig:joins_window)Join Attributes by Location Window
</p>
</div>
<p>For the Input Layer select “stats19” and for the output later select “leeds_lsoa”. For join type select “Create separate feature of each located feature”. Then click run.</p>
<div class="figure">
<img src="figures/spatial_join_result.jpg" alt="Join Results" width="100%" />
<p class="caption">
(#fig:joins_result)Join Results
</p>
</div>
<p>Once the process has completed a new layer will have been added to the map called “joined Layer” you can use the “Identify features” tool to see that each point in the stas19 data now has the</p>
</div>
</div>
<div id="attribute-calculations" class="section level2">
<h2><span class="header-section-number">6.3</span> Attribute calculations</h2>
<p>New attributes can be added to datasets with the Calculator…</p>
</div>
<div id="buffers" class="section level2">
<h2><span class="header-section-number">6.4</span> Buffers</h2>
</div>
<div id="spatial-subsetting" class="section level2">
<h2><span class="header-section-number">6.5</span> Spatial subsetting</h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="style-and-select-features.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="making-maps.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ITSLeeds/QGIS-intro/edit/master/05-processing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
