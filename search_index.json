[
["index.html", "QGIS for Transport Research: an introduction 1 Preface Pre-requisites", " QGIS for Transport Research: an introduction Robin Lovelace and Malcolm Morgan 2019-03-04 1 Preface Transport is inherently geographic. All transport involves movement from a place on the Earth to another. This means that Geographic Information Systems (GIS) have great potential to assist transport researchers. QGIS is a powerful GIS package that has become popular worldwide due to its wide range of features (including via hundreds of community contributed plugins), intuitive interface, and accessibility. QGIS is free and open source, meaning that anyone can download, install and even contribute to it. QGIS is ideal not only for learning GIS techniques but also using them in practice where software licensing and cost may be important. QGIS is rapidly growing in popularity compared with proprietary GIS and transport software products such as ESRI’s ArcMap and PTV’s Visum (Figure 1.1). Figure 1.1: The growing popularity of QGIS, as measured by internet search traffic. Source: trends.google.com. The growing popularity, power and features of QGIS means that learning it now could save much time and money long into the future: QGIS is futureproof. A more mundane for writing this tutorial was the installation of QGIS 3 across the University of Leeds. Suddenly existing material, developed for QGIS 2, no longer worked. Instead of incrementally updating those materials we decided to start from a blank slate, allowing the inclusion of new datasets and links to excellent online content that already exists for QGIS. The aim is to get you up-to-speed with the most important concepts and techniques in QGIS for Transport Planning. We refer to Transport Planning in the broad sense of providing evidence-based guidance to support sustainable transport behaviours. With air pollution, the obesity crisis, and growing levels of economic inequality in cities worldwide, this inevitably means investment in walking, cycling and public transport. For this reason, the data used in this booklet focusses on these modes. Pre-requisites This course assumes that you have access to a working installation of QGIS 3 and an internet connection. We will explain how to download the data needed for the practicals in Chapter 4. "],
["introduction.html", "2 Introduction 2.1 What is GIS? 2.2 Why use GIS for transport research? 2.3 What is QGIS? 2.4 Alternatives to QGIS", " 2 Introduction 2.1 What is GIS? GIS stands for Geographic Information Systems. The term was first used in the 1960s and has since become a common way of referring to the analysis of geographic data. That raises another question: what do we mean by ‘geographic data’? The defining feature of geographic data is that it has coordinates that allow the position of records in the dataset to be located on Earth. There are two main types of geographic data: Vector data, which typically represent points, lines and polygons. An example is a series of points representing a road. Raster data, which typically represent a continuously changing surface, such as height. An example is a satellite image of a road. The difference between vector and raster data types is illustrated in the figure below, which shows the same road (Woodhouse Lane in Leeds) represented in vector and raster geographic data forms. Since graphical user interfaces (GUIs) for GIS became popular in the early 2000s, the word GIS has become almost synonymous with ‘Dedicated GIS software’. Examples of dedicated GIS software include the open source GIS software QGIS (we will come onto what QGIS is in a subsequent section) and proprietary software such as ArcMap and TransCAD. It is also possible, and increasingly popular, to do GIS using a programming language with a command-line interface (CLI) such as Python or R (see 8) 2.2 Why use GIS for transport research? 2.3 What is QGIS? QGIS is an open source dedicated GIS software program. It has become the most commonly used open source program for working with geographic data. Search engine data from Google suggests that, worldwide, it may have become more popular than the proprietary market leader in GIS software, ESRI’s ArcMap product (Figure 2.1, see trends.google.com for further details). Figure 2.1: Data on the popularity of different GIS-related search terms, worldwide, from 2004 to 2018. Source: trends.google.com. 2.4 Alternatives to QGIS Now unplug your Internet cable, and start doing some serious work. More chapters to come in 02-foo.Rmd, 03-bar.Rmd, … "],
["working-with-qgis.html", "3 Working with QGIS 3.1 Opening QGIS 3.2 Key QGIS components 3.3 Plugins 3.4 Loading a basemap 3.5 Projects and Files 3.6 Projections and Coordinate Reference Systems", " 3 Working with QGIS Before importing data (covered in Chapter 4) it is worth getting to know QGIS, in terms of its main components, how to get help, and how it helps you organise your work into projects. This chapter describes some of QGIS’s key elements and 3.1 Opening QGIS Probably the quickest way to open QGIS on your computer press ‘Windows button’ on your keyboard and type ‘qgis’ (see Figure 3.1). Figure 3.1: Starting QGIS Select ‘QGIS Desktop’ from the list. If you have multiple versions, choose the latest version. You should see a new window appear that contains the main features of the QGIS program (see Figure 3.2). 3.2 Key QGIS components These include the following main components, numbered from 1:5 in the figure and the bullet points below (source: the QGIS Manual): Menu Bar: like most GUI-based programs you can control key aspects of QGIS and execute key commands, like saving your project and loading new datasets, by clicking Project or Layer. Note: shortcuts to access these menus from the keyboard are Alt+J and Alt+L, respectively. Toolbars: these are small icons located towards the top and left-hand side of Figure 3.2. In addition to options available from the Menu Bar, these icons provide tools for interacting with the map such as Pan (the hand symbol) and Zoom (the + and - signs). Panels: Panels are interactive elements that show information on particular aspects of the project. A view of files in the Browser Panel and the Layers Panel are shown in Figure 3.2. Map View: this is where the geographic data is displayed in an interactive map for interactive visualisation. Status Bar: this small but important element at the bottom of QGIS shows details about the current status of the Map View, such as the Coordinate Reference System (CRS), in this case, EPSG:3857 and scale. Figure 3.2: QGIS main user interface features 3.3 Plugins An important aspect of open source software is the wider community, which often supports a diverse range of extensions which add features to the original program. QGIS is no exception: it has a thriving community of programmers who, together, have created dozens of ‘plugins’, which enhance QGIS’s capabilities in countless ways. At the time of writing, there are 200+ plugins available for QGIS 3, and this number is continuously rising. To install a plugin, click on Plugins in the Menu Bar (or press Alt+P). You should see the following options. Select the second option (Manage and Install Plugins, see Figure 3.3 (left)). You should see a new window, like the one displayed in Figure 3.3 (right). Figure 3.3: Plugins menu (left) and the resulting window (right). To install a plugin, click on the ‘Install plugin’ button in the bottom right corner of Figure 3.3 (right). Use the search bar to explore for plugins. What happens if you search for ‘trans’, for example (short for transport)? 3.4 Loading a basemap You can add a basemap by clicking on the ‘XYZ Tiles’ option in the Browser Panel. Options should include Google and OpenStreetMap. Clicking on one of these will add a new layer, which can be seen in the Layers menu. Another way to add basemaps, with a wide range of default options, is via a plugin. We learned how to install plugins in the previous section so this alternative way is best learned as an exercise. Exercise: install the QuickMapServices plugin and use it to put a basemap showing Leeds in the Map View. Hint: after you have installed the plugin navigate to the Web menu (or press Alt+W). After completing the exercise your QGIS session should look something like that displayed in Figure 3.4. Figure 3.4: QGIS with a basemap from QuickMapServices 3.5 Projects and Files QGIS allows you to open multiple files at once and overlay them as layers on the same map. You can also customise the visualisation of the layers. To allow you to save your work it is recommended to save a project file. Projects don’t contain any data themselves but do contain information such as the current map view, links to data, and instructions on how data should be presented. Projects are an easy way to keep your work organised and allows you to stop and come back to work at a later date. You can create a project and save a project using the buttons shown below or using the options in the Project menu. (#fig:probect_buttons)New Project, Open Project, Save Project, Save Project As buttons Note that because the Project does not contain any data itself you cannot simply move a project file from one computer to another. It would be necessary to move both the project and any associated files. You may also need to redirect the project to the new file locations on the new computer. 3.6 Projections and Coordinate Reference Systems Figure 3.5: Map Projections, Source XKCD When plotting a map you need X and Y coordinates to specify where objects should appear. While this is simple on a flat surface spatial data must fit onto the curved surface of the earth. You may know that it is impossible to unwrap a sphere into a single flat surface without distorting (stretching, twisting, cutting) the surface in some way. The process of making a flat map from a curved Earth is known as projection, and there are many valid ways to project a map. Cartographers can argue intensely about their preferred projections as this famous XKCD comic alludes to. Coordinate Reference Systems (CRS) refer to different ways of defining the X and Y coordinates used in different projections. Largely they fall into two categories: Geographical Coordinate Systems: use latitude and longitude to represent any place on the Earth Projected Coordinate Systems: use distances from an origin point to represent a small part of the Earth, e.g. a country. The advantage of a projects CRS is that it is easier to calculate properties such as distance and area as coordinates are in metres. You can find a catalogue of different CRSs at http://spatialreference.org/ CRSs are often referred to by the EPSG number. The European Petroleum Survey Group publish a database of different coordinate systems. Two useful projections to commit to memory are: 4326 - the World Geodetic System 1984 which is a widely used geographical coordinate system 27700 - the British National Grid "],
["data.html", "4 Downloading and loading data 4.1 Importing spatial data 4.2 Importing a CSV or text file", " 4 Downloading and loading data A vital skill for doing using GIS skills to solve real-world problems is finding, downloading and importing data. Often, the first stage in the data downloading/loading process is to find the data online. In this case, we will access data from the following site, which contains data we prepared earlier for the course: github.com/ITSLeeds/QGIS-into/releases. Download and unzip the data.zip file. This file contains the data that you will use for the rest of the tutorial. To open a file in QGIS first create a QGIS project. 4.1 Importing spatial data To load a spatial data file, click on the Data Source Manager button in the top left corner of QGIS (see Figure 4.1). Figure 4.1: The Data Source Manager icon We will use the leeds_lsoa.shp example file to plot the boundaries of the Lower Layer Super Output Areas in Leeds. Open the Data Source Manager and select “Vector” then specify the “File Name” and location, or use the … to navigate to the file. Click “Add” then “Close”. Note the data manager does not close automatically after adding a file to your project, this is to allow you to add multiple files at once. Figure 4.2: The Data Source Manager - Vector 4.2 Importing a CSV or text file 4.2.1 CSV with spatial data Sometimes you have data that contains spatial information but is not in a spatial data format. A common example is to have a CSV file with latitude and longitude columns. CSV is a common format for storing data and can be opened by lots of different software, including Microsoft Excel. We will use the stats19.csv example file to plot the location of vehicles collisions in Leeds. Open the Data Source Manager and select “Delimited Text” then specify the “File Name” and location, or use the … to navigate to the file. Under the “Geometry definition” select “Point coordinates” and set the “X field” to “longitude” and the “Y field” to “latitude”. Set the “Geometry CRS” to “EPSG: 4326 – WGS 84”. Click “Add” then “Close”. Figure 4.3: The Data Source Manager - Delimited Text 4.2.2 CSV without spatial data QGIS will also allow you to import non-spatial data. Import the population.csv example file for later use using the same process as above, but selecting “No geometry (attribute only table)” "],
["style-and-select-features.html", "5 Style and select features 5.1 Identify Features 5.2 Symbology", " 5 Style and select features 5.1 Identify Features The Identify features button allow you to interogate a specific part of your spatial data simply by clicking on it Figure 5.1: Identify Features Button Clicking on a map feature brings up a pannel with more infroamtion about that feature. You can use the mode menu at the bottom of the pannel to select which layers will be included. (#fig:identify_pannel)Identify Features Pannel 5.2 Symbology In QGIS you can change the appearance of layers to communicate additional information. This is called symbology. In the layers panel right click on “stats19” and select “properties”, in the menu on the left select “Symbology” (#fig:symbology_menu)Symbology Menu For the type of Symbology select “Categorised”, the column “accident_severity”, then chose a colour ramp from the drop-down menu. Then click “Classify”. This will add all the different possible values from the data and assign each a unique colour. Click OK to return to the map. (#fig:symbology_results)Road collisons categoried by severity Exercise: Experiment using different columns and types of symbology. Hint: Think about how different types of symbology are appropriate to different types of data (categorical, discreet, continuous). Can you discover any interesting patterns in the data? How doy your choice of breakpoints affect the presentation of the data? "],
["processing-data.html", "6 Processing data 6.1 Reprojecting Data 6.2 Joining Data 6.3 Attribute calculations 6.4 Buffers 6.5 Spatial subsetting", " 6 Processing data We saw in Chapter … how to style and select features of interest from layers loaded into QGIS. In this section, we will learn how to process data. That means creating new data from existing data. 6.1 Reprojecting Data Our two spatial datasets have different coordinate systems. This can make it difficult to make connections between the datasets. So we will reproject the stats19 data to the British National Grid. In the vector, menu select Data management Tools, Reproject Layer (#fig:reproject_menu)Reproject Menu (#fig:crs_menu)Reproject MenuCordiante Reference System 6.2 Joining Data Joining data allows you to link two separate datasets together by something they have in common. There are two types of join. Attribute joins (often just called joins) link two datasets by a common attribute such as an ID number. Spatial joins link dataset by a shared location. In this next section, we will use a series of joins to find the area of Leeds with the highest rate of road collisions. 6.2.1 Attribute Joins We will join the population data onto the LSOA boundaries. Find “leeds_lsoa” in the Layers panel and right-click to bring up the context menu Click on Properties Select Joins from the options on the left Click the green + button to open the Add Vector Join window Select the following options: Join layer: population Join field: area Target field: lsoa11cd Click OK, Click OK again Figure 6.1: The Add Vector Join window Use the “Identify features” tool to see that each LSOA now has a population value. 6.2.2 Spatial Joins We will assign an LSOA ID number to each road collision by doing a spatial join. In the “Vector” menu, select “Data Management Tools”, then “Join Attributes by Location”. (#fig:joins_menu)Join Attributes by Location In the Vector Menu, select Data Management Tools, Select Attributes by location. (#fig:joins_window)Join Attributes by Location Window For the Input Layer select “stats19” and for the output later select “leeds_lsoa”. For join type select “Create separate feature of each located feature”. Then click run. (#fig:joins_result)Join Results Once the process has completed a new layer will have been added to the map called “joined Layer” you can use the “Identify features” tool to see that each point in the stas19 data now has the 6.3 Attribute calculations New attributes can be added to datasets with the Calculator… 6.4 Buffers 6.5 Spatial subsetting "],
["making-maps.html", "7 Making maps", " 7 Making maps "],
["next-steps.html", "8 Next steps", " 8 Next steps Examples of programming languages with CLIs include Python and R; some R code for plotting geographic data is illustrated below. library(sf) nc = read_sf(system.file(&quot;shape/nc.shp&quot;, package=&quot;sf&quot;)) plot(nc) "],
["more-to-say.html", "A More to Say", " A More to Say Yeah! I have finished my book, but I have more to say about some topics. Let me explain them in this appendix. To know more about bookdown, see https://bookdown.org. "],
["references.html", "References", " References "]
]
