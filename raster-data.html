<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>9 Raster Data | QGIS for Transport Research: an introduction</title>
  <meta name="description" content="A book on using open source Geographic Information System for transport planning.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="9 Raster Data | QGIS for Transport Research: an introduction" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book on using open source Geographic Information System for transport planning." />
  <meta name="github-repo" content="ITSLeeds/QGIS-intro" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Raster Data | QGIS for Transport Research: an introduction" />
  
  <meta name="twitter:description" content="A book on using open source Geographic Information System for transport planning." />
  

<meta name="author" content="Robin Lovelace and Malcolm Morgan">


<meta name="date" content="2019-03-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="more-features.html">
<link rel="next" href="accessibility-analysis.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">QGIS for Transport</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-gis"><i class="fa fa-check"></i><b>1.1</b> What is GIS?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#what-is-qgis"><i class="fa fa-check"></i><b>1.2</b> What is QGIS?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-qgis.html"><a href="working-with-qgis.html"><i class="fa fa-check"></i><b>2</b> Working with QGIS</a><ul>
<li class="chapter" data-level="2.1" data-path="working-with-qgis.html"><a href="working-with-qgis.html#opening-qgis"><i class="fa fa-check"></i><b>2.1</b> Opening QGIS</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-qgis.html"><a href="working-with-qgis.html#key-qgis-components"><i class="fa fa-check"></i><b>2.2</b> Key QGIS components</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-qgis.html"><a href="working-with-qgis.html#plugins"><i class="fa fa-check"></i><b>2.3</b> Plugins</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-qgis.html"><a href="working-with-qgis.html#loading-basemaps"><i class="fa fa-check"></i><b>2.4</b> Loading basemaps</a></li>
<li class="chapter" data-level="2.5" data-path="working-with-qgis.html"><a href="working-with-qgis.html#panning-and-zooming"><i class="fa fa-check"></i><b>2.5</b> Panning and Zooming</a></li>
<li class="chapter" data-level="2.6" data-path="working-with-qgis.html"><a href="working-with-qgis.html#projects-and-files"><i class="fa fa-check"></i><b>2.6</b> Projects and Files</a></li>
<li class="chapter" data-level="2.7" data-path="working-with-qgis.html"><a href="working-with-qgis.html#projections-and-coordinate-reference-systems"><i class="fa fa-check"></i><b>2.7</b> Projections and Coordinate Reference Systems</a></li>
<li class="chapter" data-level="2.8" data-path="working-with-qgis.html"><a href="working-with-qgis.html#summary"><i class="fa fa-check"></i><b>2.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Downloading and loading data</a><ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#importing-spatial-data"><i class="fa fa-check"></i><b>3.1</b> Importing spatial data</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#importing-a-csv-or-text-file"><i class="fa fa-check"></i><b>3.2</b> Importing a CSV or text file</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#csv-with-spatial-data"><i class="fa fa-check"></i><b>3.2.1</b> CSV with spatial data</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#csv-without-spatial-data"><i class="fa fa-check"></i><b>3.2.2</b> CSV without spatial data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#summary-1"><i class="fa fa-check"></i><b>3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="style-and-select-features.html"><a href="style-and-select-features.html"><i class="fa fa-check"></i><b>4</b> Style and select features</a><ul>
<li class="chapter" data-level="4.1" data-path="style-and-select-features.html"><a href="style-and-select-features.html#identify-features"><i class="fa fa-check"></i><b>4.1</b> Identify Features</a></li>
<li class="chapter" data-level="4.2" data-path="style-and-select-features.html"><a href="style-and-select-features.html#symbology"><i class="fa fa-check"></i><b>4.2</b> Symbology</a></li>
<li class="chapter" data-level="4.3" data-path="style-and-select-features.html"><a href="style-and-select-features.html#summary-2"><i class="fa fa-check"></i><b>4.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="processing-data.html"><a href="processing-data.html"><i class="fa fa-check"></i><b>5</b> Processing data</a><ul>
<li class="chapter" data-level="5.1" data-path="processing-data.html"><a href="processing-data.html#reprojecting-data"><i class="fa fa-check"></i><b>5.1</b> Reprojecting Data</a></li>
<li class="chapter" data-level="5.2" data-path="processing-data.html"><a href="processing-data.html#joining-data"><i class="fa fa-check"></i><b>5.2</b> Joining Data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="processing-data.html"><a href="processing-data.html#attribute-joins"><i class="fa fa-check"></i><b>5.2.1</b> Attribute Joins</a></li>
<li class="chapter" data-level="5.2.2" data-path="processing-data.html"><a href="processing-data.html#spatial-joins"><i class="fa fa-check"></i><b>5.2.2</b> Spatial Joins</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="processing-data.html"><a href="processing-data.html#points-in-polygons"><i class="fa fa-check"></i><b>5.3</b> Points in Polygons</a></li>
<li class="chapter" data-level="5.4" data-path="processing-data.html"><a href="processing-data.html#summary-3"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="making-maps.html"><a href="making-maps.html"><i class="fa fa-check"></i><b>6</b> Making maps</a><ul>
<li class="chapter" data-level="6.1" data-path="making-maps.html"><a href="making-maps.html#saving-exporting-your-map"><i class="fa fa-check"></i><b>6.1</b> Saving &amp; Exporting your map</a></li>
<li class="chapter" data-level="6.2" data-path="making-maps.html"><a href="making-maps.html#summary-4"><i class="fa fa-check"></i><b>6.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>7</b> Next steps</a></li>
<li class="chapter" data-level="8" data-path="more-features.html"><a href="more-features.html"><i class="fa fa-check"></i><b>8</b> More Features</a><ul>
<li class="chapter" data-level="8.1" data-path="more-features.html"><a href="more-features.html#attribute-calculations"><i class="fa fa-check"></i><b>8.1</b> Attribute calculations</a></li>
<li class="chapter" data-level="8.2" data-path="more-features.html"><a href="more-features.html#spatial-subsetting"><i class="fa fa-check"></i><b>8.2</b> Spatial subsetting</a></li>
<li class="chapter" data-level="8.3" data-path="more-features.html"><a href="more-features.html#geoprocessing-tool-box"><i class="fa fa-check"></i><b>8.3</b> Geoprocessing Tool Box</a></li>
<li class="chapter" data-level="8.4" data-path="more-features.html"><a href="more-features.html#summary-5"><i class="fa fa-check"></i><b>8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="raster-data.html"><a href="raster-data.html"><i class="fa fa-check"></i><b>9</b> Raster Data</a><ul>
<li class="chapter" data-level="9.1" data-path="raster-data.html"><a href="raster-data.html#what-is-the-difference-between-raster-and-vector-data."><i class="fa fa-check"></i><b>9.1</b> What is the difference between raster and vector data.</a></li>
<li class="chapter" data-level="9.2" data-path="raster-data.html"><a href="raster-data.html#download-sample-data"><i class="fa fa-check"></i><b>9.2</b> Download Sample Data</a></li>
<li class="chapter" data-level="9.3" data-path="raster-data.html"><a href="raster-data.html#adding-raster-data-to-the-map"><i class="fa fa-check"></i><b>9.3</b> Adding raster data to the map</a></li>
<li class="chapter" data-level="9.4" data-path="raster-data.html"><a href="raster-data.html#normalized-difference-vegetation-index"><i class="fa fa-check"></i><b>9.4</b> Normalized difference vegetation index</a></li>
<li class="chapter" data-level="9.5" data-path="raster-data.html"><a href="raster-data.html#linking-raster-and-vector-data"><i class="fa fa-check"></i><b>9.5</b> Linking Raster and vector data</a></li>
<li class="chapter" data-level="9.6" data-path="raster-data.html"><a href="raster-data.html#summary-6"><i class="fa fa-check"></i><b>9.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="accessibility-analysis.html"><a href="accessibility-analysis.html"><i class="fa fa-check"></i><b>10</b> Accessibility analysis</a><ul>
<li class="chapter" data-level="10.1" data-path="accessibility-analysis.html"><a href="accessibility-analysis.html#input-data"><i class="fa fa-check"></i><b>10.1</b> Input data</a></li>
<li class="chapter" data-level="10.2" data-path="accessibility-analysis.html"><a href="accessibility-analysis.html#section"><i class="fa fa-check"></i><b>10.2</b> </a></li>
<li class="chapter" data-level="10.3" data-path="accessibility-analysis.html"><a href="accessibility-analysis.html#summary-7"><i class="fa fa-check"></i><b>10.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">QGIS for Transport Research: an introduction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="raster-data" class="section level1">
<h1><span class="header-section-number">9</span> Raster Data</h1>
<p>So far we have only used Vector data with QGIS, this chapter will introduce raster data.</p>
<div id="what-is-the-difference-between-raster-and-vector-data." class="section level2">
<h2><span class="header-section-number">9.1</span> What is the difference between raster and vector data.</h2>
<p>Vector data is made up of points, lines, and polygons with attributes. This makes it well suited to many GIS purposes. For example, we have already seen that the boundaries of an LSOA can be recorded as a polygon and that polygon can have attributes like the area name, its population etc.</p>
<p>Raster data is very different. It is essentially an image where each pixel has a value. Rasters are always rectangular and have a fixed resolution (so they become pixilated as you zoom in). A common use of raster data is satellite and aerial photography. These images are made from three overlapping rasters (often called a raster stack or raster brick). The three rasters represent the Red, Blue, Green colour bands which together make up a full-colour image. Raster can have more than three bands, for example, they may be used to represent changes over time or clours beyond human perception such as infra-red or ultraviolet.</p>
</div>
<div id="download-sample-data" class="section level2">
<h2><span class="header-section-number">9.2</span> Download Sample Data</h2>
<p>Download the sample raster data from here:</p>
<p><a href="https://github.com/ITSLeeds/QGIS-intro/releases/download/0.01/leeds_cir_compress.tif" class="uri">https://github.com/ITSLeeds/QGIS-intro/releases/download/0.01/leeds_cir_compress.tif</a></p>
</div>
<div id="adding-raster-data-to-the-map" class="section level2">
<h2><span class="header-section-number">9.3</span> Adding raster data to the map</h2>
<p>Adding raster data to QGIS is done using the same data manager as vector data, except you must use the raster tab. You will notice that the raster contains an aerial photograph of Leeds, except the colours, appear to be wrong.</p>
<div class="figure"><span id="fig:raster-import"></span>
<img src="figures/raster-import.png" alt="The sample raster data added to the map" width="100%" />
<p class="caption">
Figure 9.1: The sample raster data added to the map
</p>
</div>
<p>The colour difference is due to this raster being a colour infrared image. Rather than the usual Red, Green, Blue bands this image has Near Infrared (NI), Red, Green.</p>
</div>
<div id="normalized-difference-vegetation-index" class="section level2">
<h2><span class="header-section-number">9.4</span> Normalized difference vegetation index</h2>
<p>You may have noticed that the trees and grass in the raster appear bright red, but most other features appear grey. We shall use the raster to calculate the Normalized difference vegetation index (NDVI)a measure of how much vegetation is within each raster cell.</p>
<p>Within the “Raster” menu select “Raster Calculator” the formula for calculating the NVDI is:</p>
<p><span class="math display">\[\frac{NI - Red}{NI + Red}\]</span></p>
<p>Enter the formula into the raster calculator notice the use of @ to designate the different bands of the raster layer.</p>
<div class="figure"><span id="fig:raster-calc"></span>
<img src="figures/raster-calcualtor.png" alt="The raster calcualtor with the NDVI formula" width="100%" />
<p class="caption">
Figure 9.2: The raster calcualtor with the NDVI formula
</p>
</div>
<p>Remember to specify where you want the results to be saved.</p>
<p>Once the raster calualtor is complete you should have a new raster layer. It will be in greyscale with vallues between -1 (least vegitated) and 1 most vegitated. You can ajust the symbology to make the vegitated areas clearer. In the figure, three colours are defined 0 (white), 0.2 (light green), 1 (dark green). These colours appromiatly make trees dark green, grass light green, and all non-vegiation white.</p>
<div class="figure"><span id="fig:ndvi"></span>
<img src="figures/ndvi.png" alt="The NDVI raster with a psudo-colour scheme applied" width="100%" />
<p class="caption">
Figure 9.3: The NDVI raster with a psudo-colour scheme applied
</p>
</div>
</div>
<div id="linking-raster-and-vector-data" class="section level2">
<h2><span class="header-section-number">9.5</span> Linking Raster and vector data</h2>
<p>Finally, we will link the NDVI raster back to the LSOA boundaries so that we can have an average vegetation score for each LSOA.</p>
<p>In the processing menu select “toolbox”, this opens the processing toolbox panel on the right side. Use the search bar to find the “zonal statistics” tool.</p>
<div class="figure"><span id="fig:zone-stats1"></span>
<img src="figures/zonal-statistics.png" alt="The Zonal Statistics tool in the processing toolbox" width="100%" />
<p class="caption">
Figure 9.4: The Zonal Statistics tool in the processing toolbox
</p>
</div>
<p>Complete the form to get statistics from the NDVI raster for each LSOA. When specifying the statistics to calculate select the mean.</p>
<div class="figure"><span id="fig:zone-stats2"></span>
<img src="figures/zonal-statistics2.png" alt="The Zonal Statistics tool" width="100%" />
<p class="caption">
Figure 9.5: The Zonal Statistics tool
</p>
</div>
<p>Zonal statistics may take several minutes to run. Once completed the mean NDVI value will be appended to the attribute table of the LSOA polygons.</p>
<p>Adjust the symbology of your LSOA layer to reflect the NDVI scores.</p>
<div class="figure"><span id="fig:lsoa-ndvi"></span>
<img src="figures/lsoa-ndvi.png" alt="LSOA areas with average NDVI scores" width="100%" />
<p class="caption">
Figure 9.6: LSOA areas with average NDVI scores
</p>
</div>
</div>
<div id="summary-6" class="section level2">
<h2><span class="header-section-number">9.6</span> Summary</h2>
<p>This chapter has introduced raster data, the raster calculator, and zonal statistics.</p>
<p><strong>Bonus Exercises</strong></p>
<p>Consider how you could use the NDVI values to measure access to green spaces. How might you exclude small areas of green space such as gardens, but include large areas such as parks?</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="more-features.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="accessibility-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ITSLeeds/QGIS-intro/edit/master/09-raster-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
