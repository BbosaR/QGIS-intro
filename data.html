<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>3 Downloading and loading data | QGIS for Transport Research: an introduction</title>
  <meta name="description" content="A book on using open source Geographic Information System for transport planning.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="3 Downloading and loading data | QGIS for Transport Research: an introduction" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A book on using open source Geographic Information System for transport planning." />
  <meta name="github-repo" content="ITSLeeds/QGIS-intro" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Downloading and loading data | QGIS for Transport Research: an introduction" />
  
  <meta name="twitter:description" content="A book on using open source Geographic Information System for transport planning." />
  

<meta name="author" content="Robin Lovelace">


<meta name="date" content="2019-03-02">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="working-with-qgis.html">
<link rel="next" href="style-and-select-features.html">
<script src="libs/jquery/jquery.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">QGIS for Transport</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-gis"><i class="fa fa-check"></i><b>1.1</b> What is GIS?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#why-use-gis-for-transport-research"><i class="fa fa-check"></i><b>1.2</b> Why use GIS for transport research?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-is-qgis"><i class="fa fa-check"></i><b>1.3</b> What is QGIS?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#alternatives-to-qgis"><i class="fa fa-check"></i><b>1.4</b> Alternatives to QGIS</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working-with-qgis.html"><a href="working-with-qgis.html"><i class="fa fa-check"></i><b>2</b> Working with QGIS</a><ul>
<li class="chapter" data-level="2.1" data-path="working-with-qgis.html"><a href="working-with-qgis.html#opening-qgis"><i class="fa fa-check"></i><b>2.1</b> Opening QGIS</a></li>
<li class="chapter" data-level="2.2" data-path="working-with-qgis.html"><a href="working-with-qgis.html#key-qgis-components"><i class="fa fa-check"></i><b>2.2</b> Key QGIS components</a></li>
<li class="chapter" data-level="2.3" data-path="working-with-qgis.html"><a href="working-with-qgis.html#plugins"><i class="fa fa-check"></i><b>2.3</b> Plugins</a></li>
<li class="chapter" data-level="2.4" data-path="working-with-qgis.html"><a href="working-with-qgis.html#loading-a-basemap"><i class="fa fa-check"></i><b>2.4</b> Loading a basemap</a></li>
<li class="chapter" data-level="2.5" data-path="working-with-qgis.html"><a href="working-with-qgis.html#projects-and-files"><i class="fa fa-check"></i><b>2.5</b> Projects and files</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Downloading and loading data</a><ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#importing-spatial-data"><i class="fa fa-check"></i><b>3.1</b> Importing spatial data</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#importing-a-csv-or-text-file"><i class="fa fa-check"></i><b>3.2</b> Importing a CSV or text file</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#csv-with-spatial-data"><i class="fa fa-check"></i><b>3.2.1</b> CSV with spatial data</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#csv-without-spatial-data"><i class="fa fa-check"></i><b>3.2.2</b> CSV without spatial data</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#joining-data"><i class="fa fa-check"></i><b>3.3</b> Joining Data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#attribute-joins"><i class="fa fa-check"></i><b>3.3.1</b> Attribute Joins</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#spatial-joins"><i class="fa fa-check"></i><b>3.3.2</b> Spatial Joins</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="style-and-select-features.html"><a href="style-and-select-features.html"><i class="fa fa-check"></i><b>4</b> Style and select features</a></li>
<li class="chapter" data-level="5" data-path="processing-data.html"><a href="processing-data.html"><i class="fa fa-check"></i><b>5</b> Processing data</a><ul>
<li class="chapter" data-level="5.1" data-path="processing-data.html"><a href="processing-data.html#attribute-calculations"><i class="fa fa-check"></i><b>5.1</b> Attribute calculations</a></li>
<li class="chapter" data-level="5.2" data-path="processing-data.html"><a href="processing-data.html#buffers"><i class="fa fa-check"></i><b>5.2</b> Buffers</a></li>
<li class="chapter" data-level="5.3" data-path="processing-data.html"><a href="processing-data.html#spatial-subsetting"><i class="fa fa-check"></i><b>5.3</b> Spatial subsetting</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="making-maps.html"><a href="making-maps.html"><i class="fa fa-check"></i><b>6</b> Making maps</a></li>
<li class="chapter" data-level="7" data-path="next-steps.html"><a href="next-steps.html"><i class="fa fa-check"></i><b>7</b> Next steps</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">QGIS for Transport Research: an introduction</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1">
<h1><span class="header-section-number">3</span> Downloading and loading data</h1>
<p>A vital skill for doing using GIS skills to solve real-world problems is finding, downloading and importing data.</p>
<p>Often, the first stage in the data downloading/loading process is to find the data online. In this case we will access data from the following site, which contains data we prepared earlier for the course: <a href="https://github.com/ITSLeeds/SSPA/releases/download/v1.1">github.com/ITSLeeds/SSPA/releases</a>.</p>
<p>Look at the file in your explorer…</p>
<p>To open a file in QGIS first create a QGIS project.</p>
<div id="importing-spatial-data" class="section level2">
<h2><span class="header-section-number">3.1</span> Importing spatial data</h2>
<p>To load a spatial data file, click on the Data Source Manager button in the top left corner of QGIS (see Figure <a href="data.html#fig:data-source-manager">3.1</a>).</p>
<div class="figure"><span id="fig:data-source-manager"></span>
<img src="figures/open-data-source-manager.jpg" alt="The Data Source Manager icon" width="50%" />
<p class="caption">
Figure 3.1: The Data Source Manager icon
</p>
</div>
<p>We will use the leeds_lsoa.shp example file to plot the boundaries of the Lower Layer Super Output Areas in Leeds.</p>
<p>Open the Data Source Manager and select “Vector” then specify the “File Name” and location, or use the … to navigate to the file.</p>
<p>Click “Add” then “Close”.</p>
<div class="figure"><span id="fig:data-source-manager-shp"></span>
<img src="figures/import_shp.jpg" alt="The Data Source Manager - Vector" width="50%" />
<p class="caption">
Figure 3.2: The Data Source Manager - Vector
</p>
</div>
</div>
<div id="importing-a-csv-or-text-file" class="section level2">
<h2><span class="header-section-number">3.2</span> Importing a CSV or text file</h2>
<div id="csv-with-spatial-data" class="section level3">
<h3><span class="header-section-number">3.2.1</span> CSV with spatial data</h3>
<p>Sometimes you have data that contains spatial information but is not in a spatial data format. A common example is to have a CSV file with latitude and longitude columns. CSV is a common format for storing data and can be opened by lots of different software, including Microsoft Excel. We will use the stats19.csv example file to plot the location of vehicles collisions in Leeds.</p>
<p>Open the Data Source Manager and select “Delimited Text” then specify the “File Name” and location, or use the … to navigate to the file. Under the “Geometry definition” select “Point coordinates” and set the “X field” to “longitude” and the “Y field” to “latitude”. Set the “Geometry CRS” to “EPSG: 4326 – WGS 84”.</p>
<p>Click “Add” then “Close”.</p>
<div class="figure"><span id="fig:data-source-manager-csv"></span>
<img src="figures/import_csv.jpg" alt="The Data Source Manager - Delimited Text" width="50%" />
<p class="caption">
Figure 3.3: The Data Source Manager - Delimited Text
</p>
</div>
</div>
<div id="csv-without-spatial-data" class="section level3">
<h3><span class="header-section-number">3.2.2</span> CSV without spatial data</h3>
<p>QGIS will also allow you to import non-spatial data. Import the population.csv example file for later use using the same process as above, but selecting “No geometry (attribute only table)”</p>
</div>
</div>
<div id="joining-data" class="section level2">
<h2><span class="header-section-number">3.3</span> Joining Data</h2>
<p>Joining data allows you to link two separate datasets together by something they have in common. There are two types of join. Attribute joins (often just called joins) link two datasets by a common attribute such as an ID number. Spatial joins link dataset by a shared location.</p>
<div id="attribute-joins" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Attribute Joins</h3>
<p>We will join the population data onto the LSOA boundaries.</p>
<p>Find “leeds_lsoa” in the Layers panel and right-click to bring up the context menu</p>
<p>Click on Properties</p>
<p>Select Joins from the options on the left</p>
<p>Click the green + button to open the Add Vector Join window</p>
<p>Select the following options:</p>
<pre><code>Join layer: population

Join field: area

Target field: lsoa11cd</code></pre>
<p>Click OK,</p>
<p>Click OK again</p>
<div class="figure"><span id="fig:joins"></span>
<img src="figures/joins.jpg" alt="The Add Vector Join window" width="50%" />
<p class="caption">
Figure 3.4: The Add Vector Join window
</p>
</div>
<p>Use the “Identify features” tool to see that each LSOA now has a population value.</p>
</div>
<div id="spatial-joins" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Spatial Joins</h3>
<p>We will assign an LSOA ID number to each road collision by doing a spatial join.<br />
In the “Vector” menu, select “Data Management Tools”, then “Join Attributes by Location”.</p>
<div class="figure">
<img src="figures/spatial_joins.jpg" alt="Join Attributes by Location" width="50%" />
<p class="caption">
(#fig:joins_menu)Join Attributes by Location
</p>
</div>
<div class="figure">
<img src="figures/spatial_joins_window.jpg" alt="Join Attributes by Location Window" width="50%" />
<p class="caption">
(#fig:joins_window)Join Attributes by Location Window
</p>
</div>
<div class="figure">
<img src="figures/spatial_join_result.jpg" alt="Join Results" width="50%" />
<p class="caption">
(#fig:joins_result)Join Results
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-qgis.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="style-and-select-features.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/lunr.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ITSLeeds/QGIS-intro/edit/master/03-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
